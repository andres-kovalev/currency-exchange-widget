(this.webpackJsonpinit=this.webpackJsonpinit||[]).push([[0],{46:function(e,n,t){e.exports={container:"ErrorMessage_container__33evi",message:"ErrorMessage_message__qjfBA",icon:"ErrorMessage_icon__20NKA",errorIcon:"ErrorMessage_errorIcon__23cvY"}},49:function(e){e.exports=JSON.parse('["PLN","EUR","GBP","USD","AUD","BGN","CAD","CHF","HKD","HRK","ILS","ISK","JPY","MXN","NZD","RUB","SGD","THB","TRY","ZAR"]')},64:function(e,n,t){e.exports={invalid:"NumberField_invalid__3HuTz"}},69:function(e){e.exports=JSON.parse('{"PLN":10000,"EUR":100,"USD":100}')},82:function(e,n,t){e.exports=t(95)},87:function(e,n,t){},9:function(e,n,t){e.exports={grid:"Exchange_grid__dhg4q",pocket:"Exchange_pocket__hXhKI",info:"Exchange_info__2UILs",balance:"Exchange_balance__2h2Yw",panel:"Exchange_panel__3WrRe",small:"Exchange_small__3FT8U",large:"Exchange_large__3QwvD",destination:"Exchange_destination__Srpsq",footer:"Exchange_footer__3PIuV",medium:"Exchange_medium__SGcqZ",wide:"Exchange_wide__vDJPJ",panelButton:"Exchange_panelButton__c92ci",active:"Exchange_active__3PUMy",right:"Exchange_right__3sWxq"}},95:function(e,n,t){"use strict";t.r(n);var a={};t.r(a),t.d(a,"setSourceCurrency",(function(){return ee})),t.d(a,"setDestinationCurrency",(function(){return ne})),t.d(a,"swapCurrencies",(function(){return te})),t.d(a,"setSourceAmount",(function(){return ae})),t.d(a,"setDestinationAmount",(function(){return re})),t.d(a,"setRate",(function(){return ce}));var r={};t.r(r),t.d(r,"exchange",(function(){return se}));var c=t(0),o=t.n(c),u=t(6),i=t.n(u),s=(t(87),t(63)),l=t(25),m=t(70),d=t(21),f=t.n(d),E=t(139),v=t(64),p=t.n(v);function g(e,n){var t=Object(c.useRef)(n),a=function(){var e=Object(c.useState)(0),n=Object(l.a)(e,2)[1];return Object(c.useCallback)((function(){return n((function(e){return e+1}))}),[])}(),r=e(t.current);t.current!==r&&(t.current=r);var o=Object(c.useCallback)((function(e){t.current!==e&&(t.current=e,a())}),[a]);return[t.current,o]}var _=t(28);var b=t(41);var h=function(e){return function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=Math.pow(10,t);return e(n*a)/a}},y=h(Math.round.bind(Math)),N=h(Math.floor.bind(Math)),O=/^([+-]\s)?\d+(\.\d{0,2})?$/,C=function(e){var n=e.onChange,t=e.sign,a=e.value,r=e.invalid,c=Object(m.a)(e,["onChange","sign","value","invalid"]),u=S(a),i=g((function(e){return w(e)===u?e:j(u.toString(),t)}),""),d=Object(l.a)(i,2),v=d[0],_=d[1],b={className:f()(Object(s.a)({},p.a.invalid,!!r))};return o.a.createElement(E.a,Object.assign({placeholder:"0"},c,{inputProps:b,value:v,onChange:function(e){var a=e.target,r=k(a.value);if(!r||a.value.match(O)){var c=w(r);_(j(r,t)),c!==u&&n&&n(c)}}}))};function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=N(e);return Number.isNaN(n)?0:n}function j(e,n){return parseFloat(e)?"".concat(n," ").concat(function(e){return e.toString().replace(/^(0(?!\.))+/,"")}(e)):""}C.defaultProps={invalid:!1};var x=/^([+-]\s)?(.*)$/;function k(e){var n=e.match(x);return n?n[2]:""}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return S(parseFloat(k(e)))}var T=C,R=t(140),A=t(129),U=t(131),D=t(130),I=t(132),M=t(46),B=t.n(M),P={vertical:"top",horizontal:"center"},H=function(e){var n=e.open,t=void 0!==n&&n,a=e.autoHideDuration,r=void 0===a?3e3:a,c=e.message,u=e.onClose;return o.a.createElement(R.a,{anchorOrigin:P,open:t,autoHideDuration:r,onClose:u},o.a.createElement(A.a,{className:B.a.container,"aria-describedby":"error-message",message:o.a.createElement("span",{id:"error-message",className:B.a.message},o.a.createElement(D.a,{className:f()(B.a.icon,B.a.errorIcon)}),c),action:[o.a.createElement(U.a,{key:"close","aria-label":"close",color:"inherit",onClick:u},o.a.createElement(I.a,{className:B.a.icon}))]}))},Y=t(24),F=t.n(Y),J=t(136),W=t(128),G=t(134),q=t(127),z=t(142),K=t(133),L=t(135),X=t(9),Z=t.n(X),$=t(33),Q=function(e,n){var t=n.type,a=n.payload;switch(t){case"SET_SOURCE_CURRENCY":return V(e,"source",a);case"SET_DESTINATION_CURRENCY":return V(e,"destination",a);case"SWAP_CURRENCIES":return Object($.a)(e,(function(e){Object.assign(e,{source:e.destination,destination:e.source,rate:0,active:"source"===e.active?"destination":"source"})}));case"SET_SOURCE_AMOUNT":return Object($.a)(e,(function(e){e.source.amount=a,e.destination.amount=y(a*e.rate),e.active="source"}));case"SET_DESTINATION_AMOUNT":return Object($.a)(e,(function(e){e.source.amount=y(a/e.rate),e.destination.amount=a,e.active="destination"}));case"SET_RATE":return Object($.a)(e,(function(e){"source"===e.active?e.destination.amount=y(e.source.amount*a):e.source.amount=y(e.destination.amount/a),e.rate=a}));default:return e}};function V(e,n,t){var a="source"===n?"destination":"source";return Object($.a)(e,(function(e){e[a].currency===t&&(e[a].currency=e[n].currency),e[n].currency=t,e.rate=0}))}var ee=function(e){return{type:"SET_SOURCE_CURRENCY",payload:e}},ne=function(e){return{type:"SET_DESTINATION_CURRENCY",payload:e}},te=function(){return{type:"SWAP_CURRENCIES"}},ae=function(e){return{type:"SET_SOURCE_AMOUNT",payload:e}},re=function(e){return{type:"SET_DESTINATION_AMOUNT",payload:e}},ce=function(e){return{type:"SET_RATE",payload:Math.round(1e4*e)/1e4}};var oe=function(e,n){var t,a;return F.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,F.a.awrap(fetch("".concat("https://api.ratesapi.io/api/latest","?base=").concat(e,"&symbols=").concat(n)));case 2:if((t=r.sent).ok){r.next=5;break}throw new Error("Unable to get rates (response status: ".concat(t.status,")!"));case 5:return r.next=7,F.a.awrap(t.json());case 7:return a=r.sent,r.abrupt("return",y(a.rates[n],4));case 9:case"end":return r.stop()}}))},ue={pockets:{}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,n=arguments.length>1?arguments[1]:void 0,t=n.type,a=n.payload;switch(t){case"EXCHANGE":var r=a.source,c=a.destination;return r.amount>(e.pockets[r.currency]||0)?e:Object($.a)(e,(function(e){var n=e.pockets;n[r.currency]=y(n[r.currency]-r.amount),n[c.currency]=y((n[c.currency]||0)+c.amount)}));default:return e}},se=function(e,n){return{type:"EXCHANGE",payload:{source:e,destination:n}}};function le(){return function(e){var n=Object(b.b)();return Object(c.useMemo)((function(){return Object(_.a)(e,n)}),[e,n])}(r)}var me=t(49),de={source:{currency:me[0],amount:0},destination:{currency:me[1],amount:0},active:"source",rate:0},fe=f()(Z.a.pocket,Z.a.info),Ee=f()(Z.a.panel,Z.a.small),ve=f()(Z.a.panel,Z.a.large),pe=f()(Z.a.panelButton,Z.a.medium),ge=f()(Z.a.pocket,Z.a.destination),_e=f()(Z.a.pocket,Z.a.info,Z.a.destination);function be(e){return e.pockets}function he(e,n){return o.a.createElement(z.a,{key:e,value:e,className:n},e)}var ye,Ne=function(){var e=function(e,n,t){var a=Object(c.useReducer)(e,t),r=Object(l.a)(a,2),o=r[0],u=r[1];return[o,Object(c.useMemo)((function(){return Object(_.a)(n,u)}),[n])]}(Q,a,de),n=Object(l.a)(e,2),t=n[0],r=n[1],u=Object(c.useCallback)((function(e){return r.setSourceCurrency(e.target.value)}),[r]),i=Object(c.useCallback)((function(e){return r.setDestinationCurrency(e.target.value)}),[r]),s=Object(c.useState)(""),m=Object(l.a)(s,2),d=m[0],f=m[1],E=Object(c.useCallback)((function(){return f("")}),[]);Object(c.useEffect)((function(){return function(e,n){var t,a=!0;return function r(){return F.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,F.a.awrap(e());case 2:a&&(t=setTimeout(r,n));case 3:case"end":return c.stop()}}))}(),function(){a=!1,t&&clearTimeout(t)}}((function(){var e;return F.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,F.a.awrap(oe(t.source.currency,t.destination.currency));case 3:e=n.sent,r.setRate(e),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0),f("Unable to get rates. Try later!");case 11:case"end":return n.stop()}}),null,null,[[0,7]])}),1e4)}),[t.source.currency,t.destination.currency,r]);var v=Object(b.c)(be),p=v[t.source.currency]||0,g=v[t.destination.currency]||0,h=Object(c.useCallback)((function(){return r.setSourceAmount(p)}),[r,p]),y=Object(c.useCallback)((function(){return r.setDestinationAmount(g)}),[r,g]),N=le().exchange,O=t.source.amount>0&&t.rate>0,C=t.source.amount<=p,S=Object(c.useMemo)((function(){return me.filter((function(e){return e in v})).map((function(e){return he(e,Z.a.active)})).concat(me.filter((function(e){return!(e in v)})).map((function(e){return he(e)})))}),[v]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:Z.a.grid},o.a.createElement("div",{className:Z.a.pocket},o.a.createElement(J.a,{value:t.source.currency,onChange:u,"aria-label":"Source currency"},S),o.a.createElement(T,{sign:"-",value:t.source.amount,onChange:r.setSourceAmount,invalid:!C,"aria-label":"Source amount"})),o.a.createElement("div",{className:fe},o.a.createElement(W.a,{className:Z.a.balance,onClick:h},"Available: ".concat(p," ").concat(t.source.currency)),!C&&o.a.createElement(W.a,{className:Z.a.right},"Insufficient funds")),o.a.createElement("div",{className:Ee},o.a.createElement(U.a,{color:"secondary",className:Z.a.panelButton,size:"small",onClick:r.swapCurrencies,"aria-label":"Swap currencies"},o.a.createElement(K.a,null))),o.a.createElement("div",{className:ve},o.a.createElement(G.a,{color:"secondary",variant:"outlined",className:pe,size:"small",onClick:function(){alert("Not implemented yet.")},"aria-label":"Show history"},o.a.createElement(L.a,null)," ","1 ".concat(t.source.currency," = ").concat(t.rate||"?"," ").concat(t.destination.currency))),o.a.createElement("div",{className:ge},o.a.createElement(J.a,{value:t.destination.currency,onChange:i,"aria-label":"Destination currency"},S),o.a.createElement(q.a,{fullWidth:!0},o.a.createElement(T,{sign:"+",value:t.destination.amount,onChange:r.setDestinationAmount,"aria-label":"Destination amount"}))),o.a.createElement("div",{className:_e},o.a.createElement(W.a,{className:Z.a.balance,onClick:y},"Available: ".concat(g," ").concat(t.destination.currency))),o.a.createElement("div",{className:Z.a.footer},o.a.createElement(G.a,{color:"primary",variant:"contained",size:"large",className:Z.a.wide,onClick:function(){N(t.source,t.destination)},disabled:!O||!C},"Exchange"))),o.a.createElement(H,{open:!!d,message:d,onClose:E}))},Oe=t(67),Ce=t(32),Se=function(){return o.a.createElement(Oe.a,null,o.a.createElement(Ce.d,null,o.a.createElement(Ce.b,{path:"/currency-exchange-widget/exchange"},o.a.createElement(Ne,null)),o.a.createElement(Ce.b,{path:"/"},o.a.createElement(Ce.a,{to:"/currency-exchange-widget/exchange"}))))},je=t(137),xe=t(69),ke=(ye={pockets:xe},Object(_.b)(ie,ye)),we=function(){return o.a.createElement(je.b,{injectFirst:!0},o.a.createElement(b.a,{store:ke},o.a.createElement(Se,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(we,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[82,1,2]]]);
//# sourceMappingURL=main.9172b687.chunk.js.map